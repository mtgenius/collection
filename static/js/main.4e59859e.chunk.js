(this["webpackJsonp@mtgenius/collection"]=this["webpackJsonp@mtgenius/collection"]||[]).push([[0],{101:function(e,t,r){},102:function(e,t,r){"use strict";r.r(t);var n=r(34),a=r(13),c=(r(69),r(59)),i=r(8),s=r(0),o=r(23),d=r(25),l=r(57),u=r(44),h=r(61),f=r(24),b=r(60);var p=r(2);function j(e){var t=e.currentPageIndex,r=e.onChange,n=e.pagesCount,a=function(){var e=Object(i.c)();return{ariaLabels:Object(s.useMemo)((function(){return{nextPageLabel:e("Next page"),previousPageLabel:e("Previous page"),pageLabel:function(t){var r;return null!==(r=e("Page $n",{n:t}))&&void 0!==r?r:""}}}),[e])}}().ariaLabels;return Object(p.jsx)(b.a,{ariaLabels:a,currentPageIndex:t,onChange:r,pagesCount:n})}var m=r(48),x=r(62);function O(e){switch(e){case"art_crop":return;case"border_crop":return 680;case"large":return 936;case"normal":return 680;case"png":return 1040;case"small":return 204}}function g(e){switch(e){case"art_crop":return;case"border_crop":return 480;case"large":return 672;case"normal":return 488;case"png":return 745;case"small":return 146}}function y(e){var t=e.alt,r=e.children,n=e.className,a=e.image,c=e.title,i=function(e){var t=e.image,r=e.scryfallId,n=r.substr(0,1),a=r.substr(1,1);return{height:O(t),src:"https://c1.scryfall.com/file/scryfall-cards/".concat(t,"/front/").concat(n,"/").concat(a,"/").concat(r,".jpg"),width:g(t)}}({image:a,scryfallId:r}),s=i.height,o=i.src,d=i.width;return Object(p.jsx)("img",{alt:t,className:n,height:s,src:o,title:c,width:d})}var v=r(49),C=r.n(v);function I(e){var t=e.collection,r=e.onAddToCollection,n=e.onSubtractFromCollection;return Object(s.useMemo)((function(){return{header:function(e){var t=e.cardName,r=e.scryfallId,n=e.setCode;return Object(p.jsx)(y,{alt:t,className:C.a.image,image:"small",title:"".concat(t," (").concat(n,")"),children:r})},sections:[{id:"add-subtract",content:function(e){var a,c=e.multiverseId,i=null!==(a=t.get(c))&&void 0!==a?a:0;return Object(p.jsxs)(f.a,{direction:"horizontal",size:"xxxs",children:[Object(p.jsx)(d.a,{disabled:0===i,onClick:function(){n(c)},children:"-"}),Object(p.jsx)(x.a,{className:C.a.count,disableBrowserAutocorrect:!0,readOnly:!0,value:i.toString()}),Object(p.jsx)(d.a,{onClick:function(){r(c)},children:"+"})]})}}]}}),[t,r,n])}var S=new Map;function w(e){var t=e.onClearFilter;return Object(p.jsxs)(f.a,{direction:"vertical",size:"m",children:[Object(p.jsx)(o.a,{variant:"p",children:Object(p.jsx)(i.b,{children:"No cards matched your filter."})}),Object(p.jsx)(d.a,{onClick:t,children:Object(p.jsx)(i.b,{children:"Clear filter"})})]})}var N=function(){return!0};function z(e){var t=function(e){var t=Object(i.c)(),r=Object(m.a)({pageSize:8}),n=r.currentPageIndex,c=r.handleChange,o=r.paginate,d=Object(s.useState)(S),l=Object(a.a)(d,2),u=l[0],h=l[1],f=Object(m.b)(),b=f.filteringText,p=f.handleChange,j=f.setFilteringText,x=b.toLowerCase(),O=Object(s.useMemo)((function(){return""===x?e:e.filter((function(e){return e.cardName.toLowerCase().includes(x)}))}),[e,x]);return{currentPageIndex:n,filteringPlaceholder:t("Filter by name"),filteringText:b,handlePaginationChange:c,handleTextFilterChange:p,pagesCount:Math.ceil(O.length/8),cardDefinition:I({collection:u,onAddToCollection:Object(s.useCallback)((function(e){h((function(t){var r,n=new Map(t),a=null!==(r=t.get(e))&&void 0!==r?r:0;return n.set(e,a+1),n}))}),[]),onSubtractFromCollection:Object(s.useCallback)((function(e){h((function(t){var r,n=null!==(r=t.get(e))&&void 0!==r?r:0;if(0===n)return t;var a=new Map(t);return 1===n?a.delete(e):a.set(e,n-1),a}))}),[])}),handleClearFilter:Object(s.useCallback)((function(){j("")}),[j]),items:Object(s.useMemo)((function(){return o(O)}),[O,o]),selectedItems:Object(s.useMemo)((function(){return e.filter((function(e){var t=e.multiverseId;return u.has(t)}))}),[e,u])}}(e.children),r=t.cardDefinition,n=t.currentPageIndex,c=t.filteringPlaceholder,b=t.filteringText,x=t.handleClearFilter,O=t.handlePaginationChange,g=t.handleTextFilterChange,y=t.items,v=t.pagesCount,C=t.selectedItems;return Object(p.jsx)(o.a,{margin:"l",children:Object(p.jsx)(l.a,{cardDefinition:r,empty:Object(p.jsx)(w,{onClearFilter:x}),isItemDisabled:N,items:y,selectedItems:C,selectionType:"multi",stickyHeader:!0,trackBy:"multiverseId",filter:Object(p.jsx)(h.a,{filteringPlaceholder:c,filteringText:b,onChange:g}),header:Object(p.jsx)(u.a,{actions:Object(p.jsxs)(f.a,{direction:"horizontal",size:"s",children:[Object(p.jsx)(d.a,{children:Object(p.jsx)(i.b,{children:"Import"})}),Object(p.jsx)(d.a,{variant:"primary",children:Object(p.jsx)(i.b,{children:"Export"})})]}),children:Object(p.jsx)(i.b,{children:"Cards"})}),pagination:Object(p.jsx)(j,{currentPageIndex:n,onChange:O,pagesCount:v})})})}var M=r(52),P=r(58),k={bottom:"xxxs"};function T(e){var t=e.children,r=e.lastUpdated;return"object"===typeof t&&null!==t?Object(p.jsx)(p.Fragment,{children:t}):"undefined"===typeof r?null:Object(p.jsx)(P.a,{variant:"text-grid",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)(o.a,{color:"text-label",display:"inline",margin:k,children:[Object(p.jsx)(i.b,{children:"Last updated"}),":"]})," ",r]})})}function E(e){var t=e.actions,r=e.lastUpdated;return Object(p.jsx)(M.a,{disableContentPaddings:!0,header:Object(p.jsx)(u.a,{actions:Object(p.jsx)(T,{lastUpdated:r,children:t}),variant:"h1",children:"MTGeni.us Collection"})})}var L=r(45),R=r(9),F=r.n(R),_=r(11),U=function(){return{loading:!0}},A=function(e,t){switch(t.type){case"ERROR":return{error:t.error,loading:!1};case"INIT":return{loading:!0};case"SUCCESS":return{data:t.data,loading:!1}}};function B(e){var t=Object(s.useReducer)(A,null,U),r=Object(a.a)(t,2),n=r[0],c=r[1];return[n,Object(s.useCallback)(Object(_.a)(F.a.mark((function t(){var r,n;return F.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){c({error:e,type:"ERROR"})},n=function(e){c({data:e,type:"SUCCESS"})},c({type:"INIT"}),t.abrupt("return",e().then(n).catch(r));case 4:case"end":return t.stop()}}),t)}))),[e])]}function D(){}function J(e,t){return e.cardName<t.cardName?-1:e.cardName>t.cardName?1:e.multiverseId<t.multiverseId?-1:1}function H(e){return Object(p.jsx)("li",{children:e.message},e.message)}function K(e){var t=e.Component,r=function(e){var t=e.cardNamesSize,r=e.fetchCardNames,n=e.fetchScryfallIds,c=e.fetchSetCodes,i=e.fetchSetIndexCardIndexMultiverseIds,o=e.fetchSetNames,d=e.scryfallIdsSize,l=e.setCodesSize,u=e.setIndexCardIndexMultiverseIdsSize,h=e.setNamesSize,f=B(r),b=Object(a.a)(f,2),p=b[0],j=b[1],m=B(c),x=Object(a.a)(m,2),O=x[0],g=x[1],y=B(o),v=Object(a.a)(y,2),C=v[0],I=v[1],S=B(n),w=Object(a.a)(S,2),N=w[0],z=w[1],M=B(i),P=Object(a.a)(M,2),k=P[0],T=P[1];Object(s.useEffect)((function(){j().catch(D),z().catch(D),g().catch(D),I().catch(D),T().catch(D)}),[j,z,g,I,T]);var E=p.data,L=k.data,R=N.data,U=O.data,A=C.data,H="undefined"!==typeof E,K="undefined"!==typeof R,$="undefined"!==typeof U,G="undefined"!==typeof L,Q="undefined"!==typeof A;return{bytesLoaded:Object(s.useMemo)((function(){var e=0;return H&&(e+=t),K&&(e+=d),$&&(e+=l),G&&(e+=u),Q&&(e+=h),e}),[t,H,K,$,G,Q,d,l,h,u]),bytesTotal:t+d+l+u+h,cards:Object(s.useMemo)((function(){var e=[];if("undefined"===typeof E||"undefined"===typeof L||"undefined"===typeof R||"undefined"===typeof U||"undefined"===typeof A)return e;for(var t=0,r=Object.entries(L);t<r.length;t++)for(var n=Object(a.a)(r[t],2),c=n[0],i=n[1],s=parseInt(c,10),o=U[s],d=A[s],l=0,u=Object.entries(i);l<u.length;l++){var h=Object(a.a)(u[l],2),f=h[0],b=h[1],p=parseInt(f,10);e.push({cardName:E[p],multiverseId:b,scryfallId:R[b],setCode:o,setName:d})}return e.sort(J)}),[E,L,R,U,A]),errors:Object(s.useMemo)((function(){var e=[];return p.error&&e.push(p.error),N.error&&e.push(N.error),O.error&&e.push(O.error),k.error&&e.push(k.error),C.error&&e.push(C.error),e}),[p.error,N.error,O.error,k.error,C.error]),handleRetryClick:Object(s.useCallback)(Object(_.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],p.error&&t.push(j()),N.error&&t.push(z()),O.error&&t.push(g()),k.error&&t.push(T()),C.error&&t.push(I()),e.abrupt("return",Promise.all(t));case 7:case"end":return e.stop()}}),e)}))),[p.error,j,z,g,T,I,N.error,O.error,k.error,C.error])}}({cardNamesSize:e.cardNamesSize,fetchCardNames:e.fetchCardNames,fetchScryfallIds:e.fetchScryfallIds,fetchSetCodes:e.fetchSetCodes,fetchSetIndexCardIndexMultiverseIds:e.fetchSetIndexCardIndexMultiverseIds,fetchSetNames:e.fetchSetNames,scryfallIdsSize:e.scryfallIdsSize,setCodesSize:e.setCodesSize,setIndexCardIndexMultiverseIdsSize:e.setIndexCardIndexMultiverseIdsSize,setNamesSize:e.setNamesSize}),n=r.bytesLoaded,c=r.bytesTotal,d=r.cards,l=r.errors,u=r.handleRetryClick;return l.length>0?Object(p.jsx)(L.a,{buttonText:Object(p.jsx)(i.b,{children:"Retry"}),dismissible:!1,onButtonClick:u,type:"error",visible:!0,header:1!==l.length?Object(p.jsx)(i.b,{children:"There were errors loading the card data."}):Object(p.jsx)(i.b,{children:"There was an error loading the card data."}),children:1!==l.length?Object(p.jsx)("ul",{children:l.map(H)}):Object(p.jsx)(p.Fragment,{children:l[0].message})}):n<c?Object(p.jsxs)(o.a,{children:["Loaded ",n," of ",c," bytes"]}):Object(p.jsx)(t,{children:d})}var $=r(56);function G(e){var t=e.children,r=e.contents,n=void 0===r?"default":r,a=e.header;return Object(p.jsx)($.a,{contentType:n,disableContentPaddings:!0,navigationHide:!0,toolsHide:!0,content:Object(p.jsxs)(p.Fragment,{children:[a,t]})})}function Q(e){var t=e.children,r=e.onRetryClick;return Object(p.jsx)(G,{header:Object(p.jsx)(E,{}),children:Object(p.jsx)(L.a,{buttonText:Object(p.jsx)(i.b,{children:"Retry"}),dismissible:!1,onButtonClick:r,type:"error",visible:!0,header:Object(p.jsx)(i.b,{children:"There was an error loading the application metadata."}),children:t})})}var V,W=r(53);function q(){return Object(p.jsx)(G,{header:Object(p.jsx)(E,{actions:Object(p.jsxs)(f.a,{direction:"horizontal",size:"xxs",children:[Object(p.jsx)(W.a,{}),Object(p.jsx)("span",{children:Object(p.jsx)(i.b,{children:"Loading metadata"})})]})})})}function X(e){var t=e.children,r=function(e){var t=B(e.fetchMetadata),r=Object(a.a)(t,2),n=r[0],c=r[1];return Object(s.useEffect)((function(){c().catch(D)}),[c]),{handleRetryClick:c,metadataState:n}}({fetchMetadata:e.fetchMetadata}),n=r.handleRetryClick,c=r.metadataState;return c.loading?Object(p.jsx)(q,{}):c.error?Object(p.jsx)(Q,{onRetryClick:n,children:c.error.message}):Object(p.jsx)(p.Fragment,{children:t(c.data)})}!function(e){e.English="en"}(V||(V={}));var Y=V,Z=r(54),ee=r(55),te=Object(Z.a)({},Y.English,ee);r(101);function re(e){var t=e.fetchCardNames,r=e.fetchMetadata,n=e.fetchScryfallIds,o=e.fetchSetCodes,d=e.fetchSetIndexCardIndexMultiverseIds,l=e.fetchSetNames,u=Object(s.useState)(Y.English),h=Object(a.a)(u,1)[0];return Object(p.jsx)(s.StrictMode,{children:Object(p.jsx)(c.a,{root:"body",children:Object(p.jsx)(i.a,{fallbackLocale:"en",locale:h,translations:te,children:Object(p.jsx)(X,{fetchMetadata:r,children:function(e){var r=e.cardNamesSize,a=e.date,c=e.scryfallIdsSize,i=e.setCodesSize,s=e.setIndexCardIndexMultiverseIdsSize,u=e.setNamesSize;return Object(p.jsx)(G,{header:Object(p.jsx)(E,{lastUpdated:a}),children:Object(p.jsx)(K,{Component:z,cardNamesSize:r,fetchCardNames:t,fetchScryfallIds:n,fetchSetCodes:o,fetchSetNames:l,scryfallIdsSize:c,setCodesSize:i,setNamesSize:u,fetchSetIndexCardIndexMultiverseIds:d,setIndexCardIndexMultiverseIdsSize:s})})}})})})})}function ne(e){return"object"===typeof e&&null!==e}function ae(e){return ne(e)&&Object.prototype.hasOwnProperty.call(e,"default")}function ce(e){return ae(e)?e.default:e}function ie(e){return"string"===typeof e}function se(e){if(!function(e){return Array.isArray(e)&&e.every(ie)}(e))throw new Error("Expected an array of strings.");return e}function oe(e){if(!ae(e))throw new Error("Value is not a default export.");return e}function de(){return(de=Object(_.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(3).then(r.t.bind(null,105,3)).then(oe).then(ce).then(se));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){if(!function(e){return ne(e)&&Object.prototype.hasOwnProperty.call(e,"cardKingdomIdsSize")&&Object.prototype.hasOwnProperty.call(e,"cardNamesSize")&&Object.prototype.hasOwnProperty.call(e,"date")&&Object.prototype.hasOwnProperty.call(e,"scryfallIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setCodesSize")&&Object.prototype.hasOwnProperty.call(e,"setNamesSize")&&Object.prototype.hasOwnProperty.call(e,"tcgplayerProductIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setIndexCardIndexMultiverseIdsSize")&&"number"===typeof e.cardKingdomIdsSize&&"number"===typeof e.cardNamesSize&&"string"===typeof e.date&&"number"===typeof e.scryfallIdsSize&&"number"===typeof e.setCodesSize&&"number"===typeof e.setIndexCardIndexMultiverseIdsSize&&"number"===typeof e.setNamesSize&&"number"===typeof e.tcgplayerProductIdsSize}(e))throw new Error("Expected meta data.");return e}function ue(){return(ue=Object(_.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(4).then(r.t.bind(null,106,3)).then(oe).then(ce).then(le));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e,t){return ne(e)&&Object.values(e).every(t)}function fe(e){if(!function(e){return he(e,ie)}(e))throw new Error("Expected record of strings.");return e}function be(){return(be=Object(_.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(5).then(r.t.bind(null,107,3)).then(oe).then(ce).then(fe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=Object(_.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(6).then(r.t.bind(null,108,3)).then(oe).then(ce).then(se));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return"number"===typeof e&&!Number.isNaN(e)}function me(e){return he(e,je)}function xe(e){if(!function(e){return he(e,me)}(e))throw new Error("Expected record of record of numbers.");return e}function Oe(){return(Oe=Object(_.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(7).then(r.t.bind(null,109,3)).then(oe).then(ce).then(xe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(_.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(8).then(r.t.bind(null,110,3)).then(oe).then(ce).then(se));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.render)(Object(p.jsx)(re,{fetchCardNames:function(){return de.apply(this,arguments)},fetchMetadata:function(){return ue.apply(this,arguments)},fetchScryfallIds:function(){return be.apply(this,arguments)},fetchSetCodes:function(){return pe.apply(this,arguments)},fetchSetIndexCardIndexMultiverseIds:function(){return Oe.apply(this,arguments)},fetchSetNames:function(){return ge.apply(this,arguments)}}),document.getElementById("root"))},49:function(e,t,r){e.exports={count:"cards-cards_hook_card-definition_count__2WJ1o",image:"cards-cards_hook_card-definition_image__32K6Q"}},55:function(e){e.exports=JSON.parse('{"Cards":"Cards","Clear filter":"Clear filter","Export":"Export","Filter by name":"Filter by name","Import":"Import","Last updated":"Last updated","Loading metadata":"Loading metadata","Next page":"Next page","No cards matched your filter.":"No cards matched your filter.","Page $n":"Page $n","Previous page":"Previous page","Retry":"Retry","There was an error loading the application metadata.":"There was an error loading the application metadata.","There was an error loading the card data.":"There was an error loading the card data.","There were errors loading the card data.":"There were errors loading the card data."}')}},[[102,1,2]]]);
//# sourceMappingURL=main.4e59859e.chunk.js.map