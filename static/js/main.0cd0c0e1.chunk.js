(this["webpackJsonp@mtgenius/collection"]=this["webpackJsonp@mtgenius/collection"]||[]).push([[0],{104:function(e,t,r){},105:function(e,t,r){"use strict";r.r(t);var n=r(34),a=r(11),c=(r(72),r(62)),i=r(8),s=r(0),o=r(23),d=r(60),l=r(64),u=r(63);var h=r(2);function f(e){var t=e.currentPageIndex,r=e.onChange,n=e.pagesCount,a=function(){var e=Object(i.c)();return{ariaLabels:Object(s.useMemo)((function(){return{nextPageLabel:e("Next page"),previousPageLabel:e("Previous page"),pageLabel:function(t){var r;return null!==(r=e("Page $n",{n:t}))&&void 0!==r?r:""}}}),[e])}}().ariaLabels;return Object(h.jsx)(u.a,{ariaLabels:a,currentPageIndex:t,onChange:r,pagesCount:n})}var b=r(53),p=r(54),j=r.n(p),x=r(49),m=r(25),O=r(65),g=r(24);function y(e){switch(e){case"art_crop":return;case"border_crop":return 680;case"large":return 936;case"normal":return 680;case"png":return 1040;case"small":return 204}}function v(e){switch(e){case"art_crop":return;case"border_crop":return 480;case"large":return 672;case"normal":return 488;case"png":return 745;case"small":return 146}}function C(e){var t=e.alt,r=e.children,n=e.className,a=e.image,c=e.title,i=function(e){var t=e.image,r=e.scryfallId,n=r.substr(0,1),a=r.substr(1,1);return{height:y(t),src:"https://c1.scryfall.com/file/scryfall-cards/".concat(t,"/front/").concat(n,"/").concat(a,"/").concat(r,".jpg"),width:v(t)}}({image:a,scryfallId:r}),s=i.height,o=i.src,d=i.width;return Object(h.jsx)("img",{alt:t,className:n,height:s,src:o,title:c,width:d})}var I=r(50),S=r.n(I);function w(e){var t=e.collection,r=e.onAddToCollection,n=e.onSubtractFromCollection;return Object(s.useMemo)((function(){return{header:function(e){var t=e.cardName,r=e.scryfallId,n=e.setCode;return Object(h.jsx)(C,{alt:t,className:S.a.image,image:"small",title:"".concat(t," (").concat(n,")"),children:r})},sections:[{id:"add-subtract",content:function(e){var a,c=e.multiverseId,i=null!==(a=t.get(c))&&void 0!==a?a:0;return Object(h.jsxs)(g.a,{direction:"horizontal",size:"xxxs",children:[Object(h.jsx)(m.a,{disabled:0===i,onClick:function(){n(c)},children:"-"}),Object(h.jsx)(O.a,{className:S.a.count,disableBrowserAutocorrect:!0,readOnly:!0,value:i.toString()}),Object(h.jsx)(m.a,{onClick:function(){r(c)},children:"+"})]})}}]}}),[t,r,n])}var N=new Map;function z(e){var t=e.onClearFilter;return Object(h.jsxs)(g.a,{direction:"vertical",size:"m",children:[Object(h.jsx)(o.a,{variant:"p",children:Object(h.jsx)(i.b,{children:"No cards matched your filter."})}),Object(h.jsx)(m.a,{onClick:t,children:Object(h.jsx)(i.b,{children:"Clear filter"})})]})}var k=r(44);function M(e){var t=e.onExport;return Object(h.jsx)(k.a,{actions:Object(h.jsxs)(g.a,{direction:"horizontal",size:"s",children:[Object(h.jsx)(m.a,{children:Object(h.jsx)(i.b,{children:"Import"})}),Object(h.jsx)(m.a,{onClick:t,variant:"primary",children:Object(h.jsx)(i.b,{children:"Export"})})]}),children:Object(h.jsx)(i.b,{children:"Cards"})})}var P=function(){return!0};function T(e){var t=function(e){var t=Object(i.c)(),r=Object(x.a)({pageSize:8}),n=r.currentPageIndex,c=r.handleChange,o=r.paginate,d=Object(s.useState)(N),l=Object(a.a)(d,2),u=l[0],h=l[1],f=Object(x.b)(),p=f.filteringText,m=f.handleChange,O=f.setFilteringText,g=p.toLowerCase(),y=Object(s.useMemo)((function(){return""===g?e:e.filter((function(e){return e.cardName.toLowerCase().includes(g)}))}),[e,g]);return{currentPageIndex:n,filteringPlaceholder:t("Filter by name"),filteringText:p,handlePaginationChange:c,handleTextFilterChange:m,pagesCount:Math.ceil(y.length/8),cardDefinition:w({collection:u,onAddToCollection:Object(s.useCallback)((function(e){h((function(t){var r,n=new Map(t),a=null!==(r=t.get(e))&&void 0!==r?r:0;return n.set(e,a+1),n}))}),[]),onSubtractFromCollection:Object(s.useCallback)((function(e){h((function(t){var r,n=null!==(r=t.get(e))&&void 0!==r?r:0;if(0===n)return t;var a=new Map(t);return 1===n?a.delete(e):a.set(e,n-1),a}))}),[])}),handleClearFilter:Object(s.useCallback)((function(){O("")}),[O]),handleExport:Object(s.useCallback)((function(){var e,t={},r=Object(b.a)(u.entries());try{for(r.s();!(e=r.n()).done;){var n=Object(a.a)(e.value,2),c=n[0],i=n[1];t[c]=i}}catch(s){r.e(s)}finally{r.f()}j()(JSON.stringify(t),"mtgenius-collection.json","application/json")}),[u]),items:Object(s.useMemo)((function(){return o(y)}),[y,o]),selectedItems:Object(s.useMemo)((function(){return e.filter((function(e){var t=e.multiverseId;return u.has(t)}))}),[e,u])}}(e.children),r=t.cardDefinition,n=t.currentPageIndex,c=t.filteringPlaceholder,u=t.filteringText,p=t.handleClearFilter,m=t.handleExport,O=t.handlePaginationChange,g=t.handleTextFilterChange,y=t.items,v=t.pagesCount,C=t.selectedItems;return Object(h.jsx)(o.a,{margin:"l",children:Object(h.jsx)(d.a,{cardDefinition:r,empty:Object(h.jsx)(z,{onClearFilter:p}),header:Object(h.jsx)(M,{onExport:m}),isItemDisabled:P,items:y,selectedItems:C,selectionType:"multi",stickyHeader:!0,trackBy:"multiverseId",filter:Object(h.jsx)(l.a,{filteringPlaceholder:c,filteringText:u,onChange:g}),pagination:Object(h.jsx)(f,{currentPageIndex:n,onChange:O,pagesCount:v})})})}var E=r(55),L=r(61),R={bottom:"xxxs"};function F(e){var t=e.children,r=e.lastUpdated;return"object"===typeof t&&null!==t?Object(h.jsx)(h.Fragment,{children:t}):"undefined"===typeof r?null:Object(h.jsx)(L.a,{variant:"text-grid",children:Object(h.jsxs)("div",{children:[Object(h.jsxs)(o.a,{color:"text-label",display:"inline",margin:R,children:[Object(h.jsx)(i.b,{children:"Last updated"}),":"]})," ",r]})})}function _(e){var t=e.actions,r=e.lastUpdated;return Object(h.jsx)(E.a,{disableContentPaddings:!0,header:Object(h.jsx)(k.a,{actions:Object(h.jsx)(F,{lastUpdated:r,children:t}),variant:"h1",children:"MTGeni.us Collection"})})}var U=r(45),A=r(9),B=r.n(A),J=r(12),D=function(){return{loading:!0}},H=function(e,t){switch(t.type){case"ERROR":return{error:t.error,loading:!1};case"INIT":return{loading:!0};case"SUCCESS":return{data:t.data,loading:!1}}};function K(e){var t=Object(s.useReducer)(H,null,D),r=Object(a.a)(t,2),n=r[0],c=r[1];return[n,Object(s.useCallback)(Object(J.a)(B.a.mark((function t(){var r,n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){c({error:e,type:"ERROR"})},n=function(e){c({data:e,type:"SUCCESS"})},c({type:"INIT"}),t.abrupt("return",e().then(n).catch(r));case 4:case"end":return t.stop()}}),t)}))),[e])]}function $(){}function G(e,t){return e.cardName<t.cardName?-1:e.cardName>t.cardName?1:e.multiverseId<t.multiverseId?-1:1}function Q(e){return Object(h.jsx)("li",{children:e.message},e.message)}function V(e){var t=e.Component,r=function(e){var t=e.cardNamesSize,r=e.fetchCardNames,n=e.fetchScryfallIds,c=e.fetchSetCodes,i=e.fetchSetIndexCardIndexMultiverseIds,o=e.fetchSetNames,d=e.scryfallIdsSize,l=e.setCodesSize,u=e.setIndexCardIndexMultiverseIdsSize,h=e.setNamesSize,f=K(r),b=Object(a.a)(f,2),p=b[0],j=b[1],x=K(c),m=Object(a.a)(x,2),O=m[0],g=m[1],y=K(o),v=Object(a.a)(y,2),C=v[0],I=v[1],S=K(n),w=Object(a.a)(S,2),N=w[0],z=w[1],k=K(i),M=Object(a.a)(k,2),P=M[0],T=M[1];Object(s.useEffect)((function(){j().catch($),z().catch($),g().catch($),I().catch($),T().catch($)}),[j,z,g,I,T]);var E=p.data,L=P.data,R=N.data,F=O.data,_=C.data,U="undefined"!==typeof E,A="undefined"!==typeof R,D="undefined"!==typeof F,H="undefined"!==typeof L,Q="undefined"!==typeof _;return{bytesLoaded:Object(s.useMemo)((function(){var e=0;return U&&(e+=t),A&&(e+=d),D&&(e+=l),H&&(e+=u),Q&&(e+=h),e}),[t,U,A,D,H,Q,d,l,h,u]),bytesTotal:t+d+l+u+h,cards:Object(s.useMemo)((function(){var e=[];if("undefined"===typeof E||"undefined"===typeof L||"undefined"===typeof R||"undefined"===typeof F||"undefined"===typeof _)return e;for(var t=0,r=Object.entries(L);t<r.length;t++)for(var n=Object(a.a)(r[t],2),c=n[0],i=n[1],s=parseInt(c,10),o=F[s],d=_[s],l=0,u=Object.entries(i);l<u.length;l++){var h=Object(a.a)(u[l],2),f=h[0],b=h[1],p=parseInt(f,10);e.push({cardName:E[p],multiverseId:b,scryfallId:R[b],setCode:o,setName:d})}return e.sort(G)}),[E,L,R,F,_]),errors:Object(s.useMemo)((function(){var e=[];return p.error&&e.push(p.error),N.error&&e.push(N.error),O.error&&e.push(O.error),P.error&&e.push(P.error),C.error&&e.push(C.error),e}),[p.error,N.error,O.error,P.error,C.error]),handleRetryClick:Object(s.useCallback)(Object(J.a)(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],p.error&&t.push(j()),N.error&&t.push(z()),O.error&&t.push(g()),P.error&&t.push(T()),C.error&&t.push(I()),e.abrupt("return",Promise.all(t));case 7:case"end":return e.stop()}}),e)}))),[p.error,j,z,g,T,I,N.error,O.error,P.error,C.error])}}({cardNamesSize:e.cardNamesSize,fetchCardNames:e.fetchCardNames,fetchScryfallIds:e.fetchScryfallIds,fetchSetCodes:e.fetchSetCodes,fetchSetIndexCardIndexMultiverseIds:e.fetchSetIndexCardIndexMultiverseIds,fetchSetNames:e.fetchSetNames,scryfallIdsSize:e.scryfallIdsSize,setCodesSize:e.setCodesSize,setIndexCardIndexMultiverseIdsSize:e.setIndexCardIndexMultiverseIdsSize,setNamesSize:e.setNamesSize}),n=r.bytesLoaded,c=r.bytesTotal,d=r.cards,l=r.errors,u=r.handleRetryClick;return l.length>0?Object(h.jsx)(U.a,{buttonText:Object(h.jsx)(i.b,{children:"Retry"}),dismissible:!1,onButtonClick:u,type:"error",visible:!0,header:1!==l.length?Object(h.jsx)(i.b,{children:"There were errors loading the card data."}):Object(h.jsx)(i.b,{children:"There was an error loading the card data."}),children:1!==l.length?Object(h.jsx)("ul",{children:l.map(Q)}):Object(h.jsx)(h.Fragment,{children:l[0].message})}):n<c?Object(h.jsxs)(o.a,{children:["Loaded ",n," of ",c," bytes"]}):Object(h.jsx)(t,{children:d})}var W=r(59);function q(e){var t=e.children,r=e.contents,n=void 0===r?"default":r,a=e.header;return Object(h.jsx)(W.a,{contentType:n,disableContentPaddings:!0,navigationHide:!0,toolsHide:!0,content:Object(h.jsxs)(h.Fragment,{children:[a,t]})})}function X(e){var t=e.children,r=e.onRetryClick;return Object(h.jsx)(q,{header:Object(h.jsx)(_,{}),children:Object(h.jsx)(U.a,{buttonText:Object(h.jsx)(i.b,{children:"Retry"}),dismissible:!1,onButtonClick:r,type:"error",visible:!0,header:Object(h.jsx)(i.b,{children:"There was an error loading the application metadata."}),children:t})})}var Y,Z=r(56);function ee(){return Object(h.jsx)(q,{header:Object(h.jsx)(_,{actions:Object(h.jsxs)(g.a,{direction:"horizontal",size:"xxs",children:[Object(h.jsx)(Z.a,{}),Object(h.jsx)("span",{children:Object(h.jsx)(i.b,{children:"Loading metadata"})})]})})})}function te(e){var t=e.children,r=function(e){var t=K(e.fetchMetadata),r=Object(a.a)(t,2),n=r[0],c=r[1];return Object(s.useEffect)((function(){c().catch($)}),[c]),{handleRetryClick:c,metadataState:n}}({fetchMetadata:e.fetchMetadata}),n=r.handleRetryClick,c=r.metadataState;return c.loading?Object(h.jsx)(ee,{}):c.error?Object(h.jsx)(X,{onRetryClick:n,children:c.error.message}):Object(h.jsx)(h.Fragment,{children:t(c.data)})}!function(e){e.English="en"}(Y||(Y={}));var re=Y,ne=r(57),ae=r(58),ce=Object(ne.a)({},re.English,ae);r(104);function ie(e){var t=e.fetchCardNames,r=e.fetchMetadata,n=e.fetchScryfallIds,o=e.fetchSetCodes,d=e.fetchSetIndexCardIndexMultiverseIds,l=e.fetchSetNames,u=Object(s.useState)(re.English),f=Object(a.a)(u,1)[0];return Object(h.jsx)(s.StrictMode,{children:Object(h.jsx)(c.a,{root:"body",children:Object(h.jsx)(i.a,{fallbackLocale:"en",locale:f,translations:ce,children:Object(h.jsx)(te,{fetchMetadata:r,children:function(e){var r=e.cardNamesSize,a=e.date,c=e.scryfallIdsSize,i=e.setCodesSize,s=e.setIndexCardIndexMultiverseIdsSize,u=e.setNamesSize;return Object(h.jsx)(q,{header:Object(h.jsx)(_,{lastUpdated:a}),children:Object(h.jsx)(V,{Component:T,cardNamesSize:r,fetchCardNames:t,fetchScryfallIds:n,fetchSetCodes:o,fetchSetNames:l,scryfallIdsSize:c,setCodesSize:i,setNamesSize:u,fetchSetIndexCardIndexMultiverseIds:d,setIndexCardIndexMultiverseIdsSize:s})})}})})})})}function se(e){return"object"===typeof e&&null!==e}function oe(e){return se(e)&&Object.prototype.hasOwnProperty.call(e,"default")}function de(e){return oe(e)?e.default:e}function le(e){return"string"===typeof e}function ue(e){if(!function(e){return Array.isArray(e)&&e.every(le)}(e))throw new Error("Expected an array of strings.");return e}function he(e){if(!oe(e))throw new Error("Value is not a default export.");return e}function fe(){return(fe=Object(J.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(3).then(r.t.bind(null,108,3)).then(he).then(de).then(ue));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){if(!function(e){return se(e)&&Object.prototype.hasOwnProperty.call(e,"cardKingdomIdsSize")&&Object.prototype.hasOwnProperty.call(e,"cardNamesSize")&&Object.prototype.hasOwnProperty.call(e,"date")&&Object.prototype.hasOwnProperty.call(e,"scryfallIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setCodesSize")&&Object.prototype.hasOwnProperty.call(e,"setNamesSize")&&Object.prototype.hasOwnProperty.call(e,"tcgplayerProductIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setIndexCardIndexMultiverseIdsSize")&&"number"===typeof e.cardKingdomIdsSize&&"number"===typeof e.cardNamesSize&&"string"===typeof e.date&&"number"===typeof e.scryfallIdsSize&&"number"===typeof e.setCodesSize&&"number"===typeof e.setIndexCardIndexMultiverseIdsSize&&"number"===typeof e.setNamesSize&&"number"===typeof e.tcgplayerProductIdsSize}(e))throw new Error("Expected meta data.");return e}function pe(){return(pe=Object(J.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(4).then(r.t.bind(null,109,3)).then(he).then(de).then(be));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e,t){return se(e)&&Object.values(e).every(t)}function xe(e){if(!function(e){return je(e,le)}(e))throw new Error("Expected record of strings.");return e}function me(){return(me=Object(J.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(5).then(r.t.bind(null,110,3)).then(he).then(de).then(xe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return(Oe=Object(J.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(6).then(r.t.bind(null,111,3)).then(he).then(de).then(ue));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){return"number"===typeof e&&!Number.isNaN(e)}function ye(e){return je(e,ge)}function ve(e){if(!function(e){return je(e,ye)}(e))throw new Error("Expected record of record of numbers.");return e}function Ce(){return(Ce=Object(J.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(7).then(r.t.bind(null,112,3)).then(he).then(de).then(ve));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(J.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(8).then(r.t.bind(null,113,3)).then(he).then(de).then(ue));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.render)(Object(h.jsx)(ie,{fetchCardNames:function(){return fe.apply(this,arguments)},fetchMetadata:function(){return pe.apply(this,arguments)},fetchScryfallIds:function(){return me.apply(this,arguments)},fetchSetCodes:function(){return Oe.apply(this,arguments)},fetchSetIndexCardIndexMultiverseIds:function(){return Ce.apply(this,arguments)},fetchSetNames:function(){return Ie.apply(this,arguments)}}),document.getElementById("root"))},50:function(e,t,r){e.exports={count:"cards-cards_hook_card-definition_count__2WJ1o",image:"cards-cards_hook_card-definition_image__32K6Q"}},58:function(e){e.exports=JSON.parse('{"Cards":"Cards","Clear filter":"Clear filter","Export":"Export","Filter by name":"Filter by name","Import":"Import","Last updated":"Last updated","Loading metadata":"Loading metadata","Next page":"Next page","No cards matched your filter.":"No cards matched your filter.","Page $n":"Page $n","Previous page":"Previous page","Retry":"Retry","There was an error loading the application metadata.":"There was an error loading the application metadata.","There was an error loading the card data.":"There was an error loading the card data.","There were errors loading the card data.":"There were errors loading the card data."}')}},[[105,1,2]]]);
//# sourceMappingURL=main.0cd0c0e1.chunk.js.map