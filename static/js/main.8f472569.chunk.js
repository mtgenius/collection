(this["webpackJsonp@mtgenius/collection"]=this["webpackJsonp@mtgenius/collection"]||[]).push([[0],{104:function(e,t,r){},105:function(e,t,r){"use strict";r.r(t);var n=r(36),a=(r(72),r(62)),c=r(9),i=r(0),o=r(60),s=r(64),d=r(63);var l=r(2);function u(e){var t=e.currentPageIndex,r=e.onChange,n=e.pagesCount,a=function(){var e=Object(c.c)();return{ariaLabels:Object(i.useMemo)((function(){return{nextPageLabel:e("Next page"),previousPageLabel:e("Previous page"),pageLabel:function(t){var r;return null!==(r=e("Page $n",{n:t}))&&void 0!==r?r:""}}}),[e])}}().ariaLabels;return Object(l.jsx)(d.a,{ariaLabels:a,currentPageIndex:t,onChange:r,pagesCount:n})}function h(){return!0}var f=r(10),p=r(54),b=r.n(p),j=r(51),m=r(55);function x(e){return Object(i.useCallback)((function(t){e((function(e){var r,n=new Map(e),a=null!==(r=e.get(t))&&void 0!==r?r:0;return n.set(t,a+1),n}))}),[e])}var O=r(25),g=r(65),y=r(20);function v(e){switch(e){case"art_crop":return;case"border_crop":return 680;case"large":return 936;case"normal":return 680;case"png":return 1040;case"small":return 204}}function C(e){switch(e){case"art_crop":return;case"border_crop":return 480;case"large":return 672;case"normal":return 488;case"png":return 745;case"small":return 146}}function I(e){var t=e.alt,r=e.children,n=e.className,a=e.image,c=e.title,i=function(e){var t=e.image,r=e.scryfallId,n=r.substr(0,1),a=r.substr(1,1);return{height:v(t),src:"https://c1.scryfall.com/file/scryfall-cards/".concat(t,"/front/").concat(n,"/").concat(a,"/").concat(r,".jpg"),width:C(t)}}({image:a,scryfallId:r}),o=i.height,s=i.src,d=i.width;return Object(l.jsx)("img",{alt:t,className:n,height:o,src:s,title:c,width:d})}var S=r(33),w=r.n(S);function N(e){var t=e.collection,r=e.onAddToCollection,n=e.onSubtractFromCollection;return Object(i.useMemo)((function(){return{header:function(e){var a,c=e.cardName,i=e.multiverseId,o=e.scryfallId,s=e.setCode,d=null!==(a=t.get(i))&&void 0!==a?a:0;return Object(l.jsxs)(y.a,{direction:"horizontal",size:"xxxs",children:[Object(l.jsx)(I,{alt:c,className:w.a.image,image:"small",title:"".concat(c," (").concat(s,")"),children:o}),Object(l.jsxs)(y.a,{className:w.a.collection,direction:"vertical",size:"xxxs",children:[Object(l.jsx)(O.a,{className:w.a.button,onClick:function(){r(i)},children:"+"}),Object(l.jsx)(g.a,{className:w.a.count,disableBrowserAutocorrect:!0,readOnly:!0,value:d.toString()}),Object(l.jsx)(O.a,{className:w.a.button,disabled:0===d,onClick:function(){n(i)},children:"-"})]})]})}}}),[t,r,n])}function z(e){return Object(i.useCallback)((function(t){e((function(e){var r,n=null!==(r=e.get(t))&&void 0!==r?r:0;if(0===n)return e;var a=new Map(e);return 1===n?a.delete(t):a.set(t,n-1),a}))}),[e])}var k=new Map;function M(e){var t=Object(c.c)(),r=Object(j.a)({pageSize:8}),n=r.currentPageIndex,a=r.handleChange,o=r.paginate,s=Object(i.useState)(k),d=Object(f.a)(s,2),l=d[0],u=d[1],h=Object(j.b)(),p=h.filteringText,O=h.handleChange,g=h.setFilteringText,y=p.toLowerCase(),v=Object(i.useMemo)((function(){if(""===y)return e;return e.filter((function(e){return e.cardName.toLowerCase().includes(y)}))}),[e,y]);return{currentPageIndex:n,filteringPlaceholder:t("Filter by name"),filteringText:p,handlePaginationChange:a,handleTextFilterChange:O,pagesCount:Math.ceil(v.length/8),cardDefinition:N({collection:l,onAddToCollection:x(u),onSubtractFromCollection:z(u)}),handleClearFilter:Object(i.useCallback)((function(){g("")}),[g]),handleExport:Object(i.useCallback)((function(){var e=function(e){var t,r={},n=Object(m.a)(e.entries());try{for(n.s();!(t=n.n()).done;){var a=Object(f.a)(t.value,2),c=a[0],i=a[1];r[c]=i}}catch(o){n.e(o)}finally{n.f()}return r}(l);b()(JSON.stringify(e),"mtgenius-collection.json","application/json")}),[l]),items:Object(i.useMemo)((function(){return o(v)}),[v,o]),selectedItems:Object(i.useMemo)((function(){return e.filter((function(e){var t=e.multiverseId;return l.has(t)}))}),[e,l])}}var P=r(17);function T(e){var t=e.onClearFilter;return Object(l.jsxs)(y.a,{direction:"vertical",size:"m",children:[Object(l.jsx)(P.a,{variant:"p",children:Object(l.jsx)(c.b,{children:"No cards matched your filter."})}),Object(l.jsx)(O.a,{onClick:t,children:Object(l.jsx)(c.b,{children:"Clear filter"})})]})}var E=r(61),_=r(31),L={bottom:"xxxs"};function R(e){var t=e.lastUpdated,r=e.onExport;return Object(l.jsx)(_.a,{actions:Object(l.jsxs)(y.a,{direction:"horizontal",size:"s",children:[Object(l.jsx)(O.a,{children:Object(l.jsx)(c.b,{children:"Import"})}),Object(l.jsx)(O.a,{onClick:r,variant:"primary",children:Object(l.jsx)(c.b,{children:"Export"})})]}),description:Object(l.jsx)(E.a,{variant:"text-grid",children:Object(l.jsxs)("div",{children:[Object(l.jsxs)(P.a,{color:"text-label",display:"inline",margin:L,children:[Object(l.jsx)(c.b,{children:"Last updated"}),":"]})," ",t]})}),children:"MTGeni.us Collection"})}function F(e){var t=e.children,r=e.lastUpdated,n=M(t),a=n.cardDefinition,c=n.currentPageIndex,i=n.filteringPlaceholder,d=n.filteringText,f=n.handleClearFilter,p=n.handleExport,b=n.handlePaginationChange,j=n.handleTextFilterChange,m=n.items,x=n.pagesCount,O=n.selectedItems;return Object(l.jsx)(o.a,{cardDefinition:a,empty:Object(l.jsx)(T,{onClearFilter:f}),header:Object(l.jsx)(R,{lastUpdated:r,onExport:p}),isItemDisabled:h,items:m,selectedItems:O,selectionType:"multi",stickyHeader:!0,trackBy:"multiverseId",filter:Object(l.jsx)(s.a,{filteringPlaceholder:i,filteringText:d,onChange:j}),pagination:Object(l.jsx)(u,{currentPageIndex:c,onChange:b,pagesCount:x})})}var U=r(47),B=r(8),A=r.n(B),D=r(12),J=function(){return{loading:!0}},G=function(e,t){switch(t.type){case"ERROR":return{error:t.error,loading:!1};case"INIT":return{loading:!0};case"SUCCESS":return{data:t.data,loading:!1}}};function H(e){var t=Object(i.useReducer)(G,null,J),r=Object(f.a)(t,2),n=r[0],a=r[1];return[n,Object(i.useCallback)(Object(D.a)(A.a.mark((function t(){var r,n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){a({error:e,type:"ERROR"})},n=function(e){a({data:e,type:"SUCCESS"})},a({type:"INIT"}),t.abrupt("return",e().then(n).catch(r));case 4:case"end":return t.stop()}}),t)}))),[e])]}function $(){}function K(e,t){return e.cardName<t.cardName?-1:e.cardName>t.cardName?1:e.multiverseId<t.multiverseId?-1:1}function V(e){return Object(l.jsx)("li",{children:e.message},e.message)}function Z(e){var t=e.Component,r=e.cardNamesSize,n=e.fetchCardNames,a=e.fetchScryfallIds,o=e.fetchSetCodes,s=e.fetchSetIndexCardIndexMultiverseIds,d=e.fetchSetNames,u=e.lastUpdated,h=function(e){var t=e.cardNamesSize,r=e.fetchCardNames,n=e.fetchScryfallIds,a=e.fetchSetCodes,c=e.fetchSetIndexCardIndexMultiverseIds,o=e.fetchSetNames,s=e.scryfallIdsSize,d=e.setCodesSize,l=e.setIndexCardIndexMultiverseIdsSize,u=e.setNamesSize,h=H(r),p=Object(f.a)(h,2),b=p[0],j=p[1],m=H(a),x=Object(f.a)(m,2),O=x[0],g=x[1],y=H(o),v=Object(f.a)(y,2),C=v[0],I=v[1],S=H(n),w=Object(f.a)(S,2),N=w[0],z=w[1],k=H(c),M=Object(f.a)(k,2),P=M[0],T=M[1];Object(i.useEffect)((function(){j().catch($),z().catch($),g().catch($),I().catch($),T().catch($)}),[j,z,g,I,T]);var E=b.data,_=P.data,L=N.data,R=O.data,F=C.data,U="undefined"!==typeof E,B="undefined"!==typeof L,J="undefined"!==typeof R,G="undefined"!==typeof _,V="undefined"!==typeof F;return{bytesLoaded:Object(i.useMemo)((function(){var e=0;return U&&(e+=t),B&&(e+=s),J&&(e+=d),G&&(e+=l),V&&(e+=u),e}),[t,U,B,J,G,V,s,d,u,l]),bytesTotal:t+s+d+l+u,cards:Object(i.useMemo)((function(){var e=[];if("undefined"===typeof E||"undefined"===typeof _||"undefined"===typeof L||"undefined"===typeof R||"undefined"===typeof F)return e;for(var t=0,r=Object.entries(_);t<r.length;t++)for(var n=Object(f.a)(r[t],2),a=n[0],c=n[1],i=parseInt(a,10),o=R[i],s=F[i],d=0,l=Object.entries(c);d<l.length;d++){var u=Object(f.a)(l[d],2),h=u[0],p=u[1],b=parseInt(h,10);e.push({cardName:E[b],multiverseId:p,scryfallId:L[p],setCode:o,setName:s})}return e.sort(K)}),[E,_,L,R,F]),errors:Object(i.useMemo)((function(){var e=[];return b.error&&e.push(b.error),N.error&&e.push(N.error),O.error&&e.push(O.error),P.error&&e.push(P.error),C.error&&e.push(C.error),e}),[b.error,N.error,O.error,P.error,C.error]),handleRetryClick:Object(i.useCallback)(Object(D.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],b.error&&t.push(j()),N.error&&t.push(z()),O.error&&t.push(g()),P.error&&t.push(T()),C.error&&t.push(I()),e.abrupt("return",Promise.all(t));case 7:case"end":return e.stop()}}),e)}))),[b.error,j,z,g,T,I,N.error,O.error,P.error,C.error])}}({cardNamesSize:r,fetchCardNames:n,fetchScryfallIds:a,fetchSetCodes:o,fetchSetIndexCardIndexMultiverseIds:s,fetchSetNames:d,scryfallIdsSize:e.scryfallIdsSize,setCodesSize:e.setCodesSize,setIndexCardIndexMultiverseIdsSize:e.setIndexCardIndexMultiverseIdsSize,setNamesSize:e.setNamesSize}),p=h.bytesLoaded,b=h.bytesTotal,j=h.cards,m=h.errors,x=h.handleRetryClick;return m.length>0?Object(l.jsx)(U.a,{buttonText:Object(l.jsx)(c.b,{children:"Retry"}),dismissible:!1,onButtonClick:x,type:"error",visible:!0,header:1!==m.length?Object(l.jsx)(c.b,{children:"There were errors loading the card data."}):Object(l.jsx)(c.b,{children:"There was an error loading the card data."}),children:1!==m.length?Object(l.jsx)("ul",{children:m.map(V)}):Object(l.jsx)(l.Fragment,{children:m[0].message})}):p<b?Object(l.jsxs)(P.a,{children:["Loaded ",p," of ",b," bytes"]}):Object(l.jsx)(t,{lastUpdated:u,children:j})}var q=r(45);function Q(e){var t=e.children,r=e.onRetryClick;return Object(l.jsx)(q.a,{disableContentPaddings:!0,header:Object(l.jsx)(_.a,{variant:"h1",children:"MTGeni.us Collection"}),children:Object(l.jsx)(P.a,{padding:"m",children:Object(l.jsx)(U.a,{buttonText:Object(l.jsx)(c.b,{children:"Retry"}),dismissible:!1,onButtonClick:r,type:"error",visible:!0,header:Object(l.jsx)(c.b,{children:"There was an error loading the application metadata."}),children:t.message})})})}var W=r(56);function X(){return Object(l.jsx)(q.a,{disableContentPaddings:!0,header:Object(l.jsx)(_.a,{variant:"h1",children:"MTGeni.us Collection"}),children:Object(l.jsx)(P.a,{padding:"m",children:Object(l.jsxs)(y.a,{direction:"horizontal",size:"xxs",children:[Object(l.jsx)(W.a,{}),Object(l.jsx)("span",{children:Object(l.jsx)(c.b,{children:"Loading metadata"})})]})})})}function Y(e){var t=e.children,r=function(e){var t=H(e.fetchMetadata),r=Object(f.a)(t,2),n=r[0],a=r[1];return Object(i.useEffect)((function(){a().catch($)}),[a]),{handleRetryClick:a,metadataState:n}}({fetchMetadata:e.fetchMetadata}),n=r.handleRetryClick,a=r.metadataState;return a.loading?Object(l.jsx)(X,{}):a.error?Object(l.jsx)(Q,{onRetryClick:n,children:a.error}):Object(l.jsx)(l.Fragment,{children:t(a.data)})}var ee=r(59);function te(e){var t=e.children;return Object(l.jsx)(ee.a,{content:t,contentType:"cards",navigationHide:!0,toolsHide:!0})}var re,ne=r(57);!function(e){e.English="en"}(re||(re={}));var ae=re,ce=r(58),ie=Object(ne.a)({},ae.English,ce);r(104);function oe(e){var t=e.fetchCardNames,r=e.fetchMetadata,n=e.fetchScryfallIds,o=e.fetchSetCodes,s=e.fetchSetIndexCardIndexMultiverseIds,d=e.fetchSetNames,u=function(){var e=Object(i.useState)(ae.English);return{locale:Object(f.a)(e,1)[0]}}().locale;return Object(l.jsx)(i.StrictMode,{children:Object(l.jsx)(a.a,{root:"body",children:Object(l.jsx)(c.a,{fallbackLocale:"en",locale:u,translations:ie,children:Object(l.jsx)(te,{children:Object(l.jsx)(Y,{fetchMetadata:r,children:function(e){var r=e.cardNamesSize,a=e.date,c=e.scryfallIdsSize,i=e.setCodesSize,u=e.setIndexCardIndexMultiverseIdsSize,h=e.setNamesSize;return Object(l.jsx)(Z,{Component:F,cardNamesSize:r,fetchCardNames:t,fetchScryfallIds:n,fetchSetCodes:o,fetchSetNames:d,lastUpdated:a,scryfallIdsSize:c,setCodesSize:i,setNamesSize:h,fetchSetIndexCardIndexMultiverseIds:s,setIndexCardIndexMultiverseIdsSize:u})}})})})})})}function se(e){return"object"===typeof e&&null!==e}function de(e){return se(e)&&Object.prototype.hasOwnProperty.call(e,"default")}function le(e){return de(e)?e.default:e}function ue(e){return"string"===typeof e}function he(e){if(!function(e){return Array.isArray(e)&&e.every(ue)}(e))throw new Error("Expected an array of strings.");return e}function fe(e){if(!de(e))throw new Error("Value is not a default export.");return e}function pe(){return(pe=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(3).then(r.t.bind(null,108,3)).then(fe).then(le).then(he));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){if(!function(e){return se(e)&&Object.prototype.hasOwnProperty.call(e,"cardKingdomIdsSize")&&Object.prototype.hasOwnProperty.call(e,"cardNamesSize")&&Object.prototype.hasOwnProperty.call(e,"date")&&Object.prototype.hasOwnProperty.call(e,"scryfallIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setCodesSize")&&Object.prototype.hasOwnProperty.call(e,"setNamesSize")&&Object.prototype.hasOwnProperty.call(e,"tcgplayerProductIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setIndexCardIndexMultiverseIdsSize")&&"number"===typeof e.cardKingdomIdsSize&&"number"===typeof e.cardNamesSize&&"string"===typeof e.date&&"number"===typeof e.scryfallIdsSize&&"number"===typeof e.setCodesSize&&"number"===typeof e.setIndexCardIndexMultiverseIdsSize&&"number"===typeof e.setNamesSize&&"number"===typeof e.tcgplayerProductIdsSize}(e))throw new Error("Expected meta data.");return e}function je(){return(je=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(4).then(r.t.bind(null,109,3)).then(fe).then(le).then(be));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return se(e)&&Object.values(e).every(t)}function xe(e){if(!function(e){return me(e,ue)}(e))throw new Error("Expected record of strings.");return e}function Oe(){return(Oe=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(5).then(r.t.bind(null,110,3)).then(fe).then(le).then(xe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return(ge=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(6).then(r.t.bind(null,111,3)).then(fe).then(le).then(he));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return"number"===typeof e&&!Number.isNaN(e)}function ve(e){return me(e,ye)}function Ce(e){if(!function(e){return me(e,ve)}(e))throw new Error("Expected record of record of numbers.");return e}function Ie(){return(Ie=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(7).then(r.t.bind(null,112,3)).then(fe).then(le).then(Ce));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return(Se=Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(8).then(r.t.bind(null,113,3)).then(fe).then(le).then(he));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.render)(Object(l.jsx)(oe,{fetchCardNames:function(){return pe.apply(this,arguments)},fetchMetadata:function(){return je.apply(this,arguments)},fetchScryfallIds:function(){return Oe.apply(this,arguments)},fetchSetCodes:function(){return ge.apply(this,arguments)},fetchSetIndexCardIndexMultiverseIds:function(){return Ie.apply(this,arguments)},fetchSetNames:function(){return Se.apply(this,arguments)}}),document.getElementById("root"))},33:function(e,t,r){e.exports={button:"card-collection_hook_card-definition_button__w_L-F",count:"card-collection_hook_card-definition_count__123bi",collection:"card-collection_hook_card-definition_collection__Ra4Zd",image:"card-collection_hook_card-definition_image__1p9B7"}},58:function(e){e.exports=JSON.parse('{"Cards":"Cards","Clear filter":"Clear filter","Export":"Export","Filter by name":"Filter by name","Import":"Import","Last updated":"Last updated","Loading metadata":"Loading metadata","Next page":"Next page","No cards matched your filter.":"No cards matched your filter.","Page $n":"Page $n","Previous page":"Previous page","Retry":"Retry","There was an error loading the application metadata.":"There was an error loading the application metadata.","There was an error loading the card data.":"There was an error loading the card data.","There were errors loading the card data.":"There were errors loading the card data."}')}},[[105,1,2]]]);
//# sourceMappingURL=main.8f472569.chunk.js.map