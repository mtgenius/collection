(this["webpackJsonp@mtgenius/collection"]=this["webpackJsonp@mtgenius/collection"]||[]).push([[0],{104:function(e,t,r){},105:function(e,t,r){"use strict";r.r(t);var n=r(34),a=r(11),c=(r(72),r(62)),i=r(8),s=r(0),o=r(23),d=r(25),l=r(60),u=r(44),h=r(64),f=r(24),b=r(63);var p=r(2);function j(e){var t=e.currentPageIndex,r=e.onChange,n=e.pagesCount,a=function(){var e=Object(i.c)();return{ariaLabels:Object(s.useMemo)((function(){return{nextPageLabel:e("Next page"),previousPageLabel:e("Previous page"),pageLabel:function(t){var r;return null!==(r=e("Page $n",{n:t}))&&void 0!==r?r:""}}}),[e])}}().ariaLabels;return Object(p.jsx)(b.a,{ariaLabels:a,currentPageIndex:t,onChange:r,pagesCount:n})}var x=r(53),m=r(54),O=r.n(m),g=r(49),y=r(65);function v(e){switch(e){case"art_crop":return;case"border_crop":return 680;case"large":return 936;case"normal":return 680;case"png":return 1040;case"small":return 204}}function C(e){switch(e){case"art_crop":return;case"border_crop":return 480;case"large":return 672;case"normal":return 488;case"png":return 745;case"small":return 146}}function I(e){var t=e.alt,r=e.children,n=e.className,a=e.image,c=e.title,i=function(e){var t=e.image,r=e.scryfallId,n=r.substr(0,1),a=r.substr(1,1);return{height:v(t),src:"https://c1.scryfall.com/file/scryfall-cards/".concat(t,"/front/").concat(n,"/").concat(a,"/").concat(r,".jpg"),width:C(t)}}({image:a,scryfallId:r}),s=i.height,o=i.src,d=i.width;return Object(p.jsx)("img",{alt:t,className:n,height:s,src:o,title:c,width:d})}var S=r(50),w=r.n(S);function N(e){var t=e.collection,r=e.onAddToCollection,n=e.onSubtractFromCollection;return Object(s.useMemo)((function(){return{header:function(e){var t=e.cardName,r=e.scryfallId,n=e.setCode;return Object(p.jsx)(I,{alt:t,className:w.a.image,image:"small",title:"".concat(t," (").concat(n,")"),children:r})},sections:[{id:"add-subtract",content:function(e){var a,c=e.multiverseId,i=null!==(a=t.get(c))&&void 0!==a?a:0;return Object(p.jsxs)(f.a,{direction:"horizontal",size:"xxxs",children:[Object(p.jsx)(d.a,{disabled:0===i,onClick:function(){n(c)},children:"-"}),Object(p.jsx)(y.a,{className:w.a.count,disableBrowserAutocorrect:!0,readOnly:!0,value:i.toString()}),Object(p.jsx)(d.a,{onClick:function(){r(c)},children:"+"})]})}}]}}),[t,r,n])}var z=new Map;function k(e){var t=e.onClearFilter;return Object(p.jsxs)(f.a,{direction:"vertical",size:"m",children:[Object(p.jsx)(o.a,{variant:"p",children:Object(p.jsx)(i.b,{children:"No cards matched your filter."})}),Object(p.jsx)(d.a,{onClick:t,children:Object(p.jsx)(i.b,{children:"Clear filter"})})]})}var M=function(){return!0};function P(e){var t=function(e){var t=Object(i.c)(),r=Object(g.a)({pageSize:8}),n=r.currentPageIndex,c=r.handleChange,o=r.paginate,d=Object(s.useState)(z),l=Object(a.a)(d,2),u=l[0],h=l[1],f=Object(g.b)(),b=f.filteringText,p=f.handleChange,j=f.setFilteringText,m=b.toLowerCase(),y=Object(s.useMemo)((function(){return""===m?e:e.filter((function(e){return e.cardName.toLowerCase().includes(m)}))}),[e,m]);return{currentPageIndex:n,filteringPlaceholder:t("Filter by name"),filteringText:b,handlePaginationChange:c,handleTextFilterChange:p,pagesCount:Math.ceil(y.length/8),cardDefinition:N({collection:u,onAddToCollection:Object(s.useCallback)((function(e){h((function(t){var r,n=new Map(t),a=null!==(r=t.get(e))&&void 0!==r?r:0;return n.set(e,a+1),n}))}),[]),onSubtractFromCollection:Object(s.useCallback)((function(e){h((function(t){var r,n=null!==(r=t.get(e))&&void 0!==r?r:0;if(0===n)return t;var a=new Map(t);return 1===n?a.delete(e):a.set(e,n-1),a}))}),[])}),handleClearFilter:Object(s.useCallback)((function(){j("")}),[j]),handleExport:Object(s.useCallback)((function(){var e,t={},r=Object(x.a)(u.entries());try{for(r.s();!(e=r.n()).done;){var n=Object(a.a)(e.value,2),c=n[0],i=n[1];t[c]=i}}catch(s){r.e(s)}finally{r.f()}O()(JSON.stringify(t),"mtgenius-collection.json","application/json")}),[u]),items:Object(s.useMemo)((function(){return o(y)}),[y,o]),selectedItems:Object(s.useMemo)((function(){return e.filter((function(e){var t=e.multiverseId;return u.has(t)}))}),[e,u])}}(e.children),r=t.cardDefinition,n=t.currentPageIndex,c=t.filteringPlaceholder,b=t.filteringText,m=t.handleClearFilter,y=t.handleExport,v=t.handlePaginationChange,C=t.handleTextFilterChange,I=t.items,S=t.pagesCount,w=t.selectedItems;return Object(p.jsx)(o.a,{margin:"l",children:Object(p.jsx)(l.a,{cardDefinition:r,empty:Object(p.jsx)(k,{onClearFilter:m}),isItemDisabled:M,items:I,selectedItems:w,selectionType:"multi",stickyHeader:!0,trackBy:"multiverseId",filter:Object(p.jsx)(h.a,{filteringPlaceholder:c,filteringText:b,onChange:C}),header:Object(p.jsx)(u.a,{actions:Object(p.jsxs)(f.a,{direction:"horizontal",size:"s",children:[Object(p.jsx)(d.a,{children:Object(p.jsx)(i.b,{children:"Import"})}),Object(p.jsx)(d.a,{onClick:y,variant:"primary",children:Object(p.jsx)(i.b,{children:"Export"})})]}),children:Object(p.jsx)(i.b,{children:"Cards"})}),pagination:Object(p.jsx)(j,{currentPageIndex:n,onChange:v,pagesCount:S})})})}var T=r(55),E=r(61),L={bottom:"xxxs"};function R(e){var t=e.children,r=e.lastUpdated;return"object"===typeof t&&null!==t?Object(p.jsx)(p.Fragment,{children:t}):"undefined"===typeof r?null:Object(p.jsx)(E.a,{variant:"text-grid",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)(o.a,{color:"text-label",display:"inline",margin:L,children:[Object(p.jsx)(i.b,{children:"Last updated"}),":"]})," ",r]})})}function F(e){var t=e.actions,r=e.lastUpdated;return Object(p.jsx)(T.a,{disableContentPaddings:!0,header:Object(p.jsx)(u.a,{actions:Object(p.jsx)(R,{lastUpdated:r,children:t}),variant:"h1",children:"MTGeni.us Collection"})})}var _=r(45),U=r(9),A=r.n(U),B=r(12),J=function(){return{loading:!0}},D=function(e,t){switch(t.type){case"ERROR":return{error:t.error,loading:!1};case"INIT":return{loading:!0};case"SUCCESS":return{data:t.data,loading:!1}}};function H(e){var t=Object(s.useReducer)(D,null,J),r=Object(a.a)(t,2),n=r[0],c=r[1];return[n,Object(s.useCallback)(Object(B.a)(A.a.mark((function t(){var r,n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){c({error:e,type:"ERROR"})},n=function(e){c({data:e,type:"SUCCESS"})},c({type:"INIT"}),t.abrupt("return",e().then(n).catch(r));case 4:case"end":return t.stop()}}),t)}))),[e])]}function K(){}function $(e,t){return e.cardName<t.cardName?-1:e.cardName>t.cardName?1:e.multiverseId<t.multiverseId?-1:1}function G(e){return Object(p.jsx)("li",{children:e.message},e.message)}function Q(e){var t=e.Component,r=function(e){var t=e.cardNamesSize,r=e.fetchCardNames,n=e.fetchScryfallIds,c=e.fetchSetCodes,i=e.fetchSetIndexCardIndexMultiverseIds,o=e.fetchSetNames,d=e.scryfallIdsSize,l=e.setCodesSize,u=e.setIndexCardIndexMultiverseIdsSize,h=e.setNamesSize,f=H(r),b=Object(a.a)(f,2),p=b[0],j=b[1],x=H(c),m=Object(a.a)(x,2),O=m[0],g=m[1],y=H(o),v=Object(a.a)(y,2),C=v[0],I=v[1],S=H(n),w=Object(a.a)(S,2),N=w[0],z=w[1],k=H(i),M=Object(a.a)(k,2),P=M[0],T=M[1];Object(s.useEffect)((function(){j().catch(K),z().catch(K),g().catch(K),I().catch(K),T().catch(K)}),[j,z,g,I,T]);var E=p.data,L=P.data,R=N.data,F=O.data,_=C.data,U="undefined"!==typeof E,J="undefined"!==typeof R,D="undefined"!==typeof F,G="undefined"!==typeof L,Q="undefined"!==typeof _;return{bytesLoaded:Object(s.useMemo)((function(){var e=0;return U&&(e+=t),J&&(e+=d),D&&(e+=l),G&&(e+=u),Q&&(e+=h),e}),[t,U,J,D,G,Q,d,l,h,u]),bytesTotal:t+d+l+u+h,cards:Object(s.useMemo)((function(){var e=[];if("undefined"===typeof E||"undefined"===typeof L||"undefined"===typeof R||"undefined"===typeof F||"undefined"===typeof _)return e;for(var t=0,r=Object.entries(L);t<r.length;t++)for(var n=Object(a.a)(r[t],2),c=n[0],i=n[1],s=parseInt(c,10),o=F[s],d=_[s],l=0,u=Object.entries(i);l<u.length;l++){var h=Object(a.a)(u[l],2),f=h[0],b=h[1],p=parseInt(f,10);e.push({cardName:E[p],multiverseId:b,scryfallId:R[b],setCode:o,setName:d})}return e.sort($)}),[E,L,R,F,_]),errors:Object(s.useMemo)((function(){var e=[];return p.error&&e.push(p.error),N.error&&e.push(N.error),O.error&&e.push(O.error),P.error&&e.push(P.error),C.error&&e.push(C.error),e}),[p.error,N.error,O.error,P.error,C.error]),handleRetryClick:Object(s.useCallback)(Object(B.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],p.error&&t.push(j()),N.error&&t.push(z()),O.error&&t.push(g()),P.error&&t.push(T()),C.error&&t.push(I()),e.abrupt("return",Promise.all(t));case 7:case"end":return e.stop()}}),e)}))),[p.error,j,z,g,T,I,N.error,O.error,P.error,C.error])}}({cardNamesSize:e.cardNamesSize,fetchCardNames:e.fetchCardNames,fetchScryfallIds:e.fetchScryfallIds,fetchSetCodes:e.fetchSetCodes,fetchSetIndexCardIndexMultiverseIds:e.fetchSetIndexCardIndexMultiverseIds,fetchSetNames:e.fetchSetNames,scryfallIdsSize:e.scryfallIdsSize,setCodesSize:e.setCodesSize,setIndexCardIndexMultiverseIdsSize:e.setIndexCardIndexMultiverseIdsSize,setNamesSize:e.setNamesSize}),n=r.bytesLoaded,c=r.bytesTotal,d=r.cards,l=r.errors,u=r.handleRetryClick;return l.length>0?Object(p.jsx)(_.a,{buttonText:Object(p.jsx)(i.b,{children:"Retry"}),dismissible:!1,onButtonClick:u,type:"error",visible:!0,header:1!==l.length?Object(p.jsx)(i.b,{children:"There were errors loading the card data."}):Object(p.jsx)(i.b,{children:"There was an error loading the card data."}),children:1!==l.length?Object(p.jsx)("ul",{children:l.map(G)}):Object(p.jsx)(p.Fragment,{children:l[0].message})}):n<c?Object(p.jsxs)(o.a,{children:["Loaded ",n," of ",c," bytes"]}):Object(p.jsx)(t,{children:d})}var V=r(59);function W(e){var t=e.children,r=e.contents,n=void 0===r?"default":r,a=e.header;return Object(p.jsx)(V.a,{contentType:n,disableContentPaddings:!0,navigationHide:!0,toolsHide:!0,content:Object(p.jsxs)(p.Fragment,{children:[a,t]})})}function q(e){var t=e.children,r=e.onRetryClick;return Object(p.jsx)(W,{header:Object(p.jsx)(F,{}),children:Object(p.jsx)(_.a,{buttonText:Object(p.jsx)(i.b,{children:"Retry"}),dismissible:!1,onButtonClick:r,type:"error",visible:!0,header:Object(p.jsx)(i.b,{children:"There was an error loading the application metadata."}),children:t})})}var X,Y=r(56);function Z(){return Object(p.jsx)(W,{header:Object(p.jsx)(F,{actions:Object(p.jsxs)(f.a,{direction:"horizontal",size:"xxs",children:[Object(p.jsx)(Y.a,{}),Object(p.jsx)("span",{children:Object(p.jsx)(i.b,{children:"Loading metadata"})})]})})})}function ee(e){var t=e.children,r=function(e){var t=H(e.fetchMetadata),r=Object(a.a)(t,2),n=r[0],c=r[1];return Object(s.useEffect)((function(){c().catch(K)}),[c]),{handleRetryClick:c,metadataState:n}}({fetchMetadata:e.fetchMetadata}),n=r.handleRetryClick,c=r.metadataState;return c.loading?Object(p.jsx)(Z,{}):c.error?Object(p.jsx)(q,{onRetryClick:n,children:c.error.message}):Object(p.jsx)(p.Fragment,{children:t(c.data)})}!function(e){e.English="en"}(X||(X={}));var te=X,re=r(57),ne=r(58),ae=Object(re.a)({},te.English,ne);r(104);function ce(e){var t=e.fetchCardNames,r=e.fetchMetadata,n=e.fetchScryfallIds,o=e.fetchSetCodes,d=e.fetchSetIndexCardIndexMultiverseIds,l=e.fetchSetNames,u=Object(s.useState)(te.English),h=Object(a.a)(u,1)[0];return Object(p.jsx)(s.StrictMode,{children:Object(p.jsx)(c.a,{root:"body",children:Object(p.jsx)(i.a,{fallbackLocale:"en",locale:h,translations:ae,children:Object(p.jsx)(ee,{fetchMetadata:r,children:function(e){var r=e.cardNamesSize,a=e.date,c=e.scryfallIdsSize,i=e.setCodesSize,s=e.setIndexCardIndexMultiverseIdsSize,u=e.setNamesSize;return Object(p.jsx)(W,{header:Object(p.jsx)(F,{lastUpdated:a}),children:Object(p.jsx)(Q,{Component:P,cardNamesSize:r,fetchCardNames:t,fetchScryfallIds:n,fetchSetCodes:o,fetchSetNames:l,scryfallIdsSize:c,setCodesSize:i,setNamesSize:u,fetchSetIndexCardIndexMultiverseIds:d,setIndexCardIndexMultiverseIdsSize:s})})}})})})})}function ie(e){return"object"===typeof e&&null!==e}function se(e){return ie(e)&&Object.prototype.hasOwnProperty.call(e,"default")}function oe(e){return se(e)?e.default:e}function de(e){return"string"===typeof e}function le(e){if(!function(e){return Array.isArray(e)&&e.every(de)}(e))throw new Error("Expected an array of strings.");return e}function ue(e){if(!se(e))throw new Error("Value is not a default export.");return e}function he(){return(he=Object(B.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(3).then(r.t.bind(null,108,3)).then(ue).then(oe).then(le));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){if(!function(e){return ie(e)&&Object.prototype.hasOwnProperty.call(e,"cardKingdomIdsSize")&&Object.prototype.hasOwnProperty.call(e,"cardNamesSize")&&Object.prototype.hasOwnProperty.call(e,"date")&&Object.prototype.hasOwnProperty.call(e,"scryfallIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setCodesSize")&&Object.prototype.hasOwnProperty.call(e,"setNamesSize")&&Object.prototype.hasOwnProperty.call(e,"tcgplayerProductIdsSize")&&Object.prototype.hasOwnProperty.call(e,"setIndexCardIndexMultiverseIdsSize")&&"number"===typeof e.cardKingdomIdsSize&&"number"===typeof e.cardNamesSize&&"string"===typeof e.date&&"number"===typeof e.scryfallIdsSize&&"number"===typeof e.setCodesSize&&"number"===typeof e.setIndexCardIndexMultiverseIdsSize&&"number"===typeof e.setNamesSize&&"number"===typeof e.tcgplayerProductIdsSize}(e))throw new Error("Expected meta data.");return e}function be(){return(be=Object(B.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(4).then(r.t.bind(null,109,3)).then(ue).then(oe).then(fe));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return ie(e)&&Object.values(e).every(t)}function je(e){if(!function(e){return pe(e,de)}(e))throw new Error("Expected record of strings.");return e}function xe(){return(xe=Object(B.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(5).then(r.t.bind(null,110,3)).then(ue).then(oe).then(je));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return(me=Object(B.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(6).then(r.t.bind(null,111,3)).then(ue).then(oe).then(le));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return"number"===typeof e&&!Number.isNaN(e)}function ge(e){return pe(e,Oe)}function ye(e){if(!function(e){return pe(e,ge)}(e))throw new Error("Expected record of record of numbers.");return e}function ve(){return(ve=Object(B.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(7).then(r.t.bind(null,112,3)).then(ue).then(oe).then(ye));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(B.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.e(8).then(r.t.bind(null,113,3)).then(ue).then(oe).then(le));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.render)(Object(p.jsx)(ce,{fetchCardNames:function(){return he.apply(this,arguments)},fetchMetadata:function(){return be.apply(this,arguments)},fetchScryfallIds:function(){return xe.apply(this,arguments)},fetchSetCodes:function(){return me.apply(this,arguments)},fetchSetIndexCardIndexMultiverseIds:function(){return ve.apply(this,arguments)},fetchSetNames:function(){return Ce.apply(this,arguments)}}),document.getElementById("root"))},50:function(e,t,r){e.exports={count:"cards-cards_hook_card-definition_count__2WJ1o",image:"cards-cards_hook_card-definition_image__32K6Q"}},58:function(e){e.exports=JSON.parse('{"Cards":"Cards","Clear filter":"Clear filter","Export":"Export","Filter by name":"Filter by name","Import":"Import","Last updated":"Last updated","Loading metadata":"Loading metadata","Next page":"Next page","No cards matched your filter.":"No cards matched your filter.","Page $n":"Page $n","Previous page":"Previous page","Retry":"Retry","There was an error loading the application metadata.":"There was an error loading the application metadata.","There was an error loading the card data.":"There was an error loading the card data.","There were errors loading the card data.":"There were errors loading the card data."}')}},[[105,1,2]]]);
//# sourceMappingURL=main.29163de1.chunk.js.map